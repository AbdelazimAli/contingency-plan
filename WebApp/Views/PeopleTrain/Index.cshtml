
@using WebApp.Extensions

@{

    ViewBag.Title = "Index";
    Layout = null;
}
@{
    ViewBag.Title = "Index";
    Layout = null;
    var rtl = User.Identity.RTL();
    var admin = User.IsInRole("Admin");
    int dataLevel = 4, read = 0;
    int.TryParse(Request.QueryString["DataLevel"], out dataLevel);
    int.TryParse(Request.QueryString["Read"], out read);
    string[] function = ViewData["Functions"] as string[];
}
@Html.Partial("_RequestFilters", new ViewDataDictionary { { "HasDepts", "false" }, { "Functions", function }, { "TableName", "PeopleTrain" } })
<div id="PeopleTrainDiv"></div>

<script>
    var addUrl = "@Url.Action("Details", "PeopleTrain")";
    RequestFilters.ApplayAllFilters([], {}, "PeopleTrainDiv", "@Url.Action("GetPeopleTrain", "PeopleTrain")?MenuId=@Request.QueryString["MenuId"]", addUrl);
    function Exist(data) {
        if (data.Gender == 1) {
            if (data.Attachement != null)
                return 'data:image/jpg;base64,' + data.Attachement;
            else
                return "/SpecialData/Photos/noimage.jpg";
        } else {
            if (data.Attachement != null)
                return 'data:image/jpg;base64,' + data.Attachement;
            else
                return "/SpecialData/Photos/Fnoimage.jpg";
        }
    }
    var columns = [{

        field: "Employee",
        template: "<div class='k-people-photo'><img class='k-people-photo' src=#:Exist(data)# /></div>" +
                      "&nbsp;<i class='ace-icon fa fa-circle stat#:EmpStatus#'></i>&nbsp;<div class='k-people-name'>#: Employee #</div>",
        locked:true
    },

    ];

    var objectName = "PeopleTrain";
    Grids.indexGrid({
        read: "@Url.Action("GetPeopleTrain", "PeopleTrain")?MenuId=@Request.QueryString["MenuId"]",
        edit: "@Url.Action("Details", "PeopleTrain")",
        del: "@Url.Action("Delete", "PeopleTrain")",
        show: "@Url.Action("Details", "PeopleTrain")",
        lang: "@User.Identity.GetCulture()",
        objectName: objectName,
        toolbar:'<div></div>',
        recordName: "PersonId",
        gridName: "PeopleTrainDiv",
        admin: "@admin",
        columns: columns
    });
</script>

@Html.Partial("_IndexGrid", new ViewDataDictionary {
    { "AddRecord", @Url.Action("Details", "PeopleTrain") },
      { "Admin", admin}, { "GridName", "PeopleTrainDiv" },{"objectName" , "PeopleTrain"} , {"Functions",ViewBag.Functions}})















